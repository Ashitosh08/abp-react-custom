{"ast":null,"code":"var _regeneratorRuntime = require(\"C:/Users/Ashitosh Kamble/Downloads/l76s5x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"C:/Users/Ashitosh Kamble/Downloads/l76s5x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _slicedToArray = require(\"C:/Users/Ashitosh Kamble/Downloads/l76s5x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _objectWithoutProperties = require(\"C:/Users/Ashitosh Kamble/Downloads/l76s5x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectWithoutProperties.js\").default;\nvar _objectSpread = require(\"C:/Users/Ashitosh Kamble/Downloads/l76s5x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _createForOfIteratorHelper = require(\"C:/Users/Ashitosh Kamble/Downloads/l76s5x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar _excluded = [\"children\", \"onSigninCallback\", \"skipSigninCallback\", \"onRemoveUser\", \"onSignoutRedirect\", \"onSignoutPopup\", \"implementation\"];\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __markAsModule = function __markAsModule(target) {\n  return __defProp(target, \"__esModule\", {\n    value: true\n  });\n};\nvar __export = function __export(target, all) {\n  for (var name in all) __defProp(target, name, {\n    get: all[name],\n    enumerable: true\n  });\n};\nvar __reExport = function __reExport(target, module2, copyDefault, desc) {\n  if (module2 && typeof module2 === \"object\" || typeof module2 === \"function\") {\n    var _iterator = _createForOfIteratorHelper(__getOwnPropNames(module2)),\n      _step;\n    try {\n      var _loop = function _loop() {\n        var key = _step.value;\n        if (!__hasOwnProp.call(target, key) && (copyDefault || key !== \"default\")) __defProp(target, key, {\n          get: function get() {\n            return module2[key];\n          },\n          enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable\n        });\n      };\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        _loop();\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n  return target;\n};\nvar __toESM = function __toESM(module2, isNodeMode) {\n  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, \"default\", !isNodeMode && module2 && module2.__esModule ? {\n    get: function get() {\n      return module2.default;\n    },\n    enumerable: true\n  } : {\n    value: module2,\n    enumerable: true\n  })), module2);\n};\nvar __toCommonJS = /* @__PURE__ */function (cache) {\n  return function (module2, temp) {\n    return cache && cache.get(module2) || (temp = __reExport(__markAsModule({}), module2, 1), cache && cache.set(module2, temp), temp);\n  };\n}(typeof WeakMap !== \"undefined\" ? /* @__PURE__ */new WeakMap() : 0);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  AuthContext: function AuthContext() {\n    return _AuthContext;\n  },\n  AuthProvider: function AuthProvider() {\n    return _AuthProvider;\n  },\n  hasAuthParams: function hasAuthParams() {\n    return _hasAuthParams;\n  },\n  useAuth: function useAuth() {\n    return _useAuth;\n  },\n  withAuth: function withAuth() {\n    return _withAuth;\n  }\n});\n\n// src/AuthContext.ts\nvar import_react = __toESM(require(\"react\"));\nvar _AuthContext = import_react.default.createContext(void 0);\n_AuthContext.displayName = \"AuthContext\";\n\n// src/AuthProvider.tsx\nvar import_react2 = __toESM(require(\"react\"));\nvar import_oidc_client_ts = require(\"oidc-client-ts\");\n\n// src/AuthState.ts\nvar initialAuthState = {\n  isLoading: true,\n  isAuthenticated: false\n};\n\n// src/reducer.ts\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case \"INITIALISED\":\n    case \"USER_LOADED\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        user: action.user,\n        isLoading: false,\n        isAuthenticated: action.user ? !action.user.expired : false,\n        error: void 0\n      });\n    case \"USER_UNLOADED\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        user: void 0,\n        isAuthenticated: false\n      });\n    case \"NAVIGATOR_INIT\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: true,\n        activeNavigator: action.method\n      });\n    case \"NAVIGATOR_CLOSE\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: false,\n        activeNavigator: void 0\n      });\n    case \"ERROR\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: false,\n        error: action.error\n      });\n    default:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: false,\n        error: new Error(\"unknown type \".concat(action[\"type\"]))\n      });\n  }\n};\n\n// src/utils.ts\nvar _hasAuthParams = function _hasAuthParams() {\n  var location = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.location;\n  var searchParams = new URLSearchParams(location.search);\n  if ((searchParams.get(\"code\") || searchParams.get(\"error\")) && searchParams.get(\"state\")) {\n    return true;\n  }\n  searchParams = new URLSearchParams(location.hash.replace(\"#\", \"?\"));\n  if ((searchParams.get(\"code\") || searchParams.get(\"error\")) && searchParams.get(\"state\")) {\n    return true;\n  }\n  return false;\n};\nvar normalizeErrorFn = function normalizeErrorFn(fallbackMessage) {\n  return function (error) {\n    if (error instanceof Error) {\n      return error;\n    }\n    return new Error(fallbackMessage);\n  };\n};\nvar loginError = normalizeErrorFn(\"Login failed\");\n\n// src/AuthProvider.tsx\nvar userManagerContextKeys = [\"clearStaleState\", \"querySessionStatus\", \"revokeTokens\", \"startSilentRenew\", \"stopSilentRenew\"];\nvar navigatorKeys = [\"signinPopup\", \"signinSilent\", \"signinRedirect\", \"signoutPopup\", \"signoutRedirect\"];\nvar unsupportedEnvironment = function unsupportedEnvironment(fnName) {\n  return function () {\n    throw new Error(\"UserManager#\".concat(fnName, \" was called from an unsupported context. If this is a server-rendered page, defer this call with useEffect() or pass a custom UserManager implementation.\"));\n  };\n};\nvar defaultUserManagerImpl = typeof window === \"undefined\" ? null : import_oidc_client_ts.UserManager;\nvar _AuthProvider = function _AuthProvider(props) {\n  var children = props.children,\n    onSigninCallback = props.onSigninCallback,\n    skipSigninCallback = props.skipSigninCallback,\n    onRemoveUser = props.onRemoveUser,\n    onSignoutRedirect = props.onSignoutRedirect,\n    onSignoutPopup = props.onSignoutPopup,\n    _props$implementation = props.implementation,\n    UserManagerImpl = _props$implementation === void 0 ? defaultUserManagerImpl : _props$implementation,\n    userManagerSettings = _objectWithoutProperties(props, _excluded);\n  var _ref = (0, import_react2.useState)(function () {\n      return UserManagerImpl ? new UserManagerImpl(userManagerSettings) : {\n        settings: userManagerSettings\n      };\n    }),\n    _ref2 = _slicedToArray(_ref, 1),\n    userManager = _ref2[0];\n  var _ref3 = (0, import_react2.useReducer)(reducer, initialAuthState),\n    _ref4 = _slicedToArray(_ref3, 2),\n    state = _ref4[0],\n    dispatch = _ref4[1];\n  var userManagerContext = (0, import_react2.useMemo)(function () {\n    return Object.assign({\n      settings: userManager.settings,\n      events: userManager.events\n    }, Object.fromEntries(userManagerContextKeys.map(function (key) {\n      var _a, _b;\n      return [key, (_b = (_a = userManager[key]) == null ? void 0 : _a.bind(userManager)) != null ? _b : unsupportedEnvironment(key)];\n    })), Object.fromEntries(navigatorKeys.map(function (key) {\n      return [key, userManager[key] ? /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _args = arguments;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              dispatch({\n                type: \"NAVIGATOR_INIT\",\n                method: key\n              });\n              _context.prev = 1;\n              _context.next = 4;\n              return userManager[key].apply(userManager, _args);\n            case 4:\n              return _context.abrupt(\"return\", _context.sent);\n            case 5:\n              _context.prev = 5;\n              dispatch({\n                type: \"NAVIGATOR_CLOSE\"\n              });\n              return _context.finish(5);\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[1,, 5, 8]]);\n      })) : unsupportedEnvironment(key)];\n    })));\n  }, [userManager]);\n  (0, import_react2.useEffect)(function () {\n    if (!userManager) return;\n    void _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var user2, user;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            if (!(_hasAuthParams() && !skipSigninCallback)) {\n              _context2.next = 6;\n              break;\n            }\n            _context2.next = 4;\n            return userManager.signinCallback();\n          case 4:\n            user2 = _context2.sent;\n            onSigninCallback && onSigninCallback(user2);\n          case 6:\n            _context2.next = 8;\n            return userManager.getUser();\n          case 8:\n            user = _context2.sent;\n            dispatch({\n              type: \"INITIALISED\",\n              user: user\n            });\n            _context2.next = 15;\n            break;\n          case 12:\n            _context2.prev = 12;\n            _context2.t0 = _context2[\"catch\"](0);\n            dispatch({\n              type: \"ERROR\",\n              error: loginError(_context2.t0)\n            });\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[0, 12]]);\n    }))();\n  }, [userManager, skipSigninCallback, onSigninCallback]);\n  (0, import_react2.useEffect)(function () {\n    if (!userManager) return void 0;\n    var handleUserLoaded = function handleUserLoaded(user) {\n      dispatch({\n        type: \"USER_LOADED\",\n        user: user\n      });\n    };\n    userManager.events.addUserLoaded(handleUserLoaded);\n    var handleUserUnloaded = function handleUserUnloaded() {\n      dispatch({\n        type: \"USER_UNLOADED\"\n      });\n    };\n    userManager.events.addUserUnloaded(handleUserUnloaded);\n    var handleSilentRenewError = function handleSilentRenewError(error) {\n      dispatch({\n        type: \"ERROR\",\n        error: error\n      });\n    };\n    userManager.events.addSilentRenewError(handleSilentRenewError);\n    return function () {\n      userManager.events.removeUserLoaded(handleUserLoaded);\n      userManager.events.removeUserUnloaded(handleUserUnloaded);\n      userManager.events.removeSilentRenewError(handleSilentRenewError);\n    };\n  }, [userManager]);\n  var removeUser = (0, import_react2.useCallback)(userManager ? function () {\n    return userManager.removeUser().then(onRemoveUser);\n  } : unsupportedEnvironment(\"removeUser\"), [userManager, onRemoveUser]);\n  var signoutRedirect = (0, import_react2.useCallback)(function (args) {\n    return userManagerContext.signoutRedirect(args).then(onSignoutRedirect);\n  }, [userManagerContext.signoutRedirect, onSignoutRedirect]);\n  var signoutPopup = (0, import_react2.useCallback)(function (args) {\n    return userManagerContext.signoutPopup(args).then(onSignoutPopup);\n  }, [userManagerContext.signoutPopup, onSignoutPopup]);\n  return /* @__PURE__ */import_react2.default.createElement(_AuthContext.Provider, {\n    value: _objectSpread(_objectSpread(_objectSpread({}, state), userManagerContext), {}, {\n      removeUser: removeUser,\n      signoutRedirect: signoutRedirect,\n      signoutPopup: signoutPopup\n    })\n  }, children);\n};\n\n// src/useAuth.ts\nvar import_react3 = __toESM(require(\"react\"));\nvar _useAuth = function _useAuth() {\n  var context = import_react3.default.useContext(_AuthContext);\n  if (!context) {\n    throw new Error(\"AuthProvider context is undefined, please verify you are calling useAuth() as child of a <AuthProvider> component.\");\n  }\n  return context;\n};\n\n// src/withAuth.tsx\nvar import_react4 = __toESM(require(\"react\"));\nfunction _withAuth(Component) {\n  var displayName = \"withAuth(\".concat(Component.displayName || Component.name, \")\");\n  var C = function C(props) {\n    var auth = _useAuth();\n    return /* @__PURE__ */import_react4.default.createElement(Component, _objectSpread(_objectSpread({}, props), auth));\n  };\n  C.displayName = displayName;\n  return C;\n}\nmodule.exports = __toCommonJS(src_exports);\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  AuthContext: _AuthContext,\n  AuthProvider: _AuthProvider,\n  hasAuthParams: _hasAuthParams,\n  useAuth: _useAuth,\n  withAuth: _withAuth\n});","map":{"version":3,"sources":["../../src/index.ts","../../src/AuthContext.ts","../../src/AuthProvider.tsx","../../src/AuthState.ts","../../src/reducer.ts","../../src/utils.ts","../../src/useAuth.ts","../../src/withAuth.tsx"],"names":[],"mappings":"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","sourcesContent":["export * from \"./AuthContext\";\nexport * from \"./AuthProvider\";\nexport type { AuthState } from \"./AuthState\";\nexport * from \"./useAuth\";\nexport { hasAuthParams } from \"./utils\";\nexport * from \"./withAuth\";\n","import React from \"react\";\nimport type {\n    UserManagerSettings, UserManagerEvents, User, SessionStatus,\n    SigninPopupArgs, SigninSilentArgs, SigninRedirectArgs,\n    SignoutRedirectArgs, SignoutPopupArgs, QuerySessionStatusArgs,\n    RevokeTokensTypes,\n} from \"oidc-client-ts\";\n\nimport type { AuthState } from \"./AuthState\";\n\n/**\n * @public\n */\nexport interface AuthContextProps extends AuthState {\n    /**\n     * UserManager functions. See [UserManager](https://github.com/authts/oidc-client-ts) for more details.\n     */\n    readonly settings: UserManagerSettings;\n    readonly events: UserManagerEvents;\n    clearStaleState(): Promise<void>;\n    removeUser(): Promise<void>;\n    signinPopup(args?: SigninPopupArgs): Promise<User>;\n    signinSilent(args?: SigninSilentArgs): Promise<User | null>;\n    signinRedirect(args?: SigninRedirectArgs): Promise<void>;\n    signoutRedirect(args?: SignoutRedirectArgs): Promise<void>;\n    signoutPopup(args?: SignoutPopupArgs): Promise<void>;\n    querySessionStatus(args?: QuerySessionStatusArgs): Promise<SessionStatus | null>;\n    revokeTokens(types?: RevokeTokensTypes): Promise<void>;\n    startSilentRenew(): void;\n    stopSilentRenew(): void;\n}\n\n/**\n * @public\n */\nexport const AuthContext = React.createContext<AuthContextProps | undefined>(undefined);\nAuthContext.displayName = \"AuthContext\";\n","import React, { useCallback, useEffect, useMemo, useReducer, useState } from \"react\";\nimport { UserManager, UserManagerSettings, User } from \"oidc-client-ts\";\nimport type { SignoutRedirectArgs, SignoutPopupArgs } from \"oidc-client-ts\";\n\nimport { AuthContext } from \"./AuthContext\";\nimport { initialAuthState } from \"./AuthState\";\nimport { reducer } from \"./reducer\";\nimport { hasAuthParams, loginError } from \"./utils\";\n\n/**\n * @public\n */\nexport interface AuthProviderProps extends UserManagerSettings {\n    /**\n     * The child nodes your Provider has wrapped\n     */\n    children?: React.ReactNode;\n\n    /**\n     * On sign in callback hook. Can be a async function.\n     * Here you can remove the code and state parameters from the url when you are redirected from the authorize page.\n     *\n     * ```jsx\n     * const onSigninCallback = (_user: User | void): void => {\n     *     window.history.replaceState(\n     *         {},\n     *         document.title,\n     *         window.location.pathname\n     *     )\n     * }\n     * ```\n     */\n    onSigninCallback?: (user: User | void) => Promise<void> | void;\n\n    /**\n     * By default, if the page url has code/state params, this provider will call automatically the userManager.signinCallback.\n     * In some cases the code might be for something else (another OAuth SDK perhaps). In these\n     * instances you can instruct the client to ignore them.\n     *\n     * ```jsx\n     * <AuthProvider\n     *   skipSigninCallback={window.location.pathname === '/stripe-oauth-callback'}\n     * >\n     * ```\n     */\n    skipSigninCallback?: boolean;\n\n    /**\n     * On remove user hook. Can be a async function.\n     * Here you can change the url after the user is removed.\n     *\n     * ```jsx\n     * const onRemoveUser = (): void => {\n     *     // go to home after logout\n     *     window.location.pathname = \"\"\n     * }\n     * ```\n     */\n    onRemoveUser?: () => Promise<void> | void;\n\n    /**\n     * @deprecated On sign out redirect hook. Can be a async function.\n     */\n    onSignoutRedirect?: () => Promise<void> | void;\n\n    /**\n     * @deprecated On sign out popup hook. Can be a async function.\n     */\n    onSignoutPopup?: () => Promise<void> | void;\n\n    /**\n     * Allow passing a custom UserManager implementation\n     */\n    implementation?: typeof UserManager | null;\n}\n\nconst userManagerContextKeys = [\n    \"clearStaleState\",\n    \"querySessionStatus\",\n    \"revokeTokens\",\n    \"startSilentRenew\",\n    \"stopSilentRenew\",\n] as const;\nconst navigatorKeys = [\n    \"signinPopup\",\n    \"signinSilent\",\n    \"signinRedirect\",\n    \"signoutPopup\",\n    \"signoutRedirect\",\n] as const;\nconst unsupportedEnvironment = (fnName: string) => () => {\n    throw new Error(`UserManager#${fnName} was called from an unsupported context. If this is a server-rendered page, defer this call with useEffect() or pass a custom UserManager implementation.`);\n};\nconst defaultUserManagerImpl = typeof window === \"undefined\" ? null : UserManager;\n\n/**\n * Provides the AuthContext to its child components.\n * @public\n */\nexport const AuthProvider = (props: AuthProviderProps): JSX.Element => {\n    const {\n        children,\n\n        onSigninCallback,\n        skipSigninCallback,\n\n        onRemoveUser,\n        onSignoutRedirect,\n        onSignoutPopup,\n\n        implementation: UserManagerImpl = defaultUserManagerImpl,\n        ...userManagerSettings\n    } = props;\n\n    const [userManager] = useState(() => UserManagerImpl\n        ? new UserManagerImpl(userManagerSettings)\n        : { settings: userManagerSettings } as UserManager,\n    );\n    const [state, dispatch] = useReducer(reducer, initialAuthState);\n    const userManagerContext = useMemo(\n        () => Object.assign(\n            {\n                settings: userManager.settings,\n                events: userManager.events,\n            },\n            Object.fromEntries(\n                userManagerContextKeys.map((key) => [\n                    key,\n                    userManager[key]?.bind(userManager) ?? unsupportedEnvironment(key),\n                ]),\n            ) as Pick<UserManager, typeof userManagerContextKeys[number]>,\n            Object.fromEntries(\n                navigatorKeys.map((key) => [\n                    key,\n                    userManager[key]\n                        ? async (...args: never[]) => {\n                            dispatch({ type: \"NAVIGATOR_INIT\", method: key });\n                            try {\n                                return await userManager[key](...args);\n                            } finally {\n                                dispatch({ type: \"NAVIGATOR_CLOSE\" });\n                            }\n                        }\n                        : unsupportedEnvironment(key),\n                ]),\n            ) as Pick<UserManager, typeof navigatorKeys[number]>,\n        ),\n        [userManager],\n    );\n\n    useEffect(() => {\n        if (!userManager) return;\n        void (async (): Promise<void> => {\n            try {\n                // check if returning back from authority server\n                if (hasAuthParams() && !skipSigninCallback) {\n                    const user = await userManager.signinCallback();\n                    onSigninCallback && onSigninCallback(user);\n                }\n                const user = await userManager.getUser();\n                dispatch({ type: \"INITIALISED\", user });\n            } catch (error) {\n                dispatch({ type: \"ERROR\", error: loginError(error) });\n            }\n        })();\n    }, [userManager, skipSigninCallback, onSigninCallback]);\n\n    // register to userManager events\n    useEffect(() => {\n        if (!userManager) return undefined;\n        // event UserLoaded (e.g. initial load, silent renew success)\n        const handleUserLoaded = (user: User) => {\n            dispatch({ type: \"USER_LOADED\", user });\n        };\n        userManager.events.addUserLoaded(handleUserLoaded);\n\n        // event UserUnloaded (e.g. userManager.removeUser)\n        const handleUserUnloaded = () => {\n            dispatch({ type: \"USER_UNLOADED\" });\n        };\n        userManager.events.addUserUnloaded(handleUserUnloaded);\n\n        // event SilentRenewError (silent renew error)\n        const handleSilentRenewError = (error: Error) => {\n            dispatch({ type: \"ERROR\", error });\n        };\n        userManager.events.addSilentRenewError(handleSilentRenewError);\n\n        return () => {\n            userManager.events.removeUserLoaded(handleUserLoaded);\n            userManager.events.removeUserUnloaded(handleUserUnloaded);\n            userManager.events.removeSilentRenewError(handleSilentRenewError);\n        };\n    }, [userManager]);\n\n    const removeUser = useCallback(\n        userManager\n            ? () => userManager.removeUser().then(onRemoveUser)\n            : unsupportedEnvironment(\"removeUser\"),\n        [userManager, onRemoveUser],\n    );\n\n    const signoutRedirect = useCallback(\n        (args?: SignoutRedirectArgs) => userManagerContext.signoutRedirect(args).then(onSignoutRedirect),\n        [userManagerContext.signoutRedirect, onSignoutRedirect],\n    );\n\n    const signoutPopup = useCallback(\n        (args?: SignoutPopupArgs) => userManagerContext.signoutPopup(args).then(onSignoutPopup),\n        [userManagerContext.signoutPopup, onSignoutPopup],\n    );\n\n    return (\n        <AuthContext.Provider\n            value={{\n                ...state,\n                ...userManagerContext,\n                removeUser,\n                signoutRedirect,\n                signoutPopup,\n            }}\n        >\n            {children}\n        </AuthContext.Provider>\n    );\n};\n","import type { User } from \"oidc-client-ts\";\n\n/**\n * The auth state which, when combined with the auth methods, make up the return object of the `useAuth` hook.\n *\n * @public\n */\nexport interface AuthState {\n    /**\n     * See [User](https://authts.github.io/oidc-client-ts/classes/User.html) for more details.\n     */\n    user?: User | null;\n\n    /**\n     * True when the library has been initialized and no navigator request is in progress.\n     */\n    isLoading: boolean;\n\n    /**\n     * True while the user has a valid access token.\n     */\n    isAuthenticated: boolean;\n\n    /**\n     * Tracks the status of most recent signin/signout request method.\n     */\n    activeNavigator?: \"signinRedirect\" | \"signinPopup\" | \"signinSilent\" | \"signoutRedirect\" | \"signoutPopup\";\n\n    /**\n     * Was there a signin or silent renew error?\n     */\n    error?: Error;\n}\n\n/**\n * The initial auth state.\n */\nexport const initialAuthState: AuthState = {\n    isLoading: true,\n    isAuthenticated: false,\n};\n","import type { User } from \"oidc-client-ts\";\n\nimport type { AuthState } from \"./AuthState\";\n\ntype Action =\n    | { type: \"INITIALISED\" | \"USER_LOADED\"; user: User | null }\n    | { type: \"USER_UNLOADED\" }\n    | { type: \"NAVIGATOR_INIT\"; method: NonNullable<AuthState[\"activeNavigator\"]> }\n    | { type: \"NAVIGATOR_CLOSE\" }\n    | { type: \"ERROR\"; error: Error };\n\n/**\n * Handles how that state changes in the `useAuth` hook.\n */\nexport const reducer = (state: AuthState, action: Action): AuthState => {\n    switch (action.type) {\n        case \"INITIALISED\":\n        case \"USER_LOADED\":\n            return {\n                ...state,\n                user: action.user,\n                isLoading: false,\n                isAuthenticated: action.user ? !action.user.expired : false,\n                error: undefined,\n            };\n        case \"USER_UNLOADED\":\n            return {\n                ...state,\n                user: undefined,\n                isAuthenticated: false,\n            };\n        case \"NAVIGATOR_INIT\":\n            return {\n                ...state,\n                isLoading: true,\n                activeNavigator: action.method,\n            };\n        case \"NAVIGATOR_CLOSE\":\n            // we intentionally don't handle cases where multiple concurrent navigators are open\n            return {\n                ...state,\n                isLoading: false,\n                activeNavigator: undefined,\n            };\n        case \"ERROR\":\n            return {\n                ...state,\n                isLoading: false,\n                error: action.error,\n            };\n        default:\n            return {\n                ...state,\n                isLoading: false,\n                error: new Error(`unknown type ${action[\"type\"] as string}`),\n            };\n    }\n};\n","/**\n * @public\n */\nexport const hasAuthParams = (location = window.location): boolean => {\n    // response_mode: query\n    let searchParams = new URLSearchParams(location.search);\n    if ((searchParams.get(\"code\") || searchParams.get(\"error\")) &&\n        searchParams.get(\"state\")) {\n        return true;\n    }\n\n    // response_mode: fragment\n    searchParams = new URLSearchParams(location.hash.replace(\"#\", \"?\"));\n    if ((searchParams.get(\"code\") || searchParams.get(\"error\")) &&\n        searchParams.get(\"state\")) {\n        return true;\n    }\n\n    return false;\n};\n\nconst normalizeErrorFn = (fallbackMessage: string) => (error: unknown): Error => {\n    if (error instanceof Error) {\n        return error;\n    }\n    return new Error(fallbackMessage);\n};\n\nexport const loginError = normalizeErrorFn(\"Login failed\");\n","import React from \"react\";\n\nimport { AuthContext, AuthContextProps } from \"./AuthContext\";\n\n/**\n * @public\n */\nexport const useAuth = (): AuthContextProps => {\n    const context = React.useContext(AuthContext);\n\n    if (!context) {\n        throw new Error(\"AuthProvider context is undefined, please verify you are calling useAuth() as child of a <AuthProvider> component.\");\n    }\n\n    return context;\n};\n","import React from \"react\";\n\nimport type { AuthContextProps } from \"./AuthContext\";\nimport { useAuth } from \"./useAuth\";\n\n/**\n * A public higher-order component to access the imperative API\n * @public\n */\nexport function withAuth<P extends AuthContextProps>(\n    Component: React.ComponentType<P>,\n): React.ComponentType<Omit<P, keyof AuthContextProps>> {\n    const displayName = `withAuth(${Component.displayName || Component.name})`;\n    const C: React.FC<Omit<P, keyof AuthContextProps>> = (props) => {\n        const auth = useAuth();\n\n        return <Component {...(props as P)} {...auth} />;\n    };\n\n    C.displayName = displayName;\n\n    return C;\n}\n"]},"metadata":{},"sourceType":"script"}